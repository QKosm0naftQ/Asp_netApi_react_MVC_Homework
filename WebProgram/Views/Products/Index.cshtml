@model ProductListViewModel



<div class="container mt-5">
    <h2 class="text-center mb-4">Фільми</h2>

    @await Html.PartialAsync("_ProductSearchItems", Model.Search)

    <a href="@Url.Action("Create")" class="btn btn-success">Додати</a>

    <div class="alert alert-primary mt-2" role="alert">
        Кількість елементів: <strong>@Model.Count</strong>
    </div>

    @if(Model.Count == 0)
    {
        <div class="border rounded p-3 text-muted text-center bg-light">
            <i class="bi bi-search me-2"></i>
            Фільми за вашим запитом не знайдено.
        </div>
    }
    else
    {
        @await Html.PartialAsync("_ListProductItems", Model.Products)
        <div class="d-flex justify-content-center mt-4">
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    @{
                        int totalPages = (int)Math.Ceiling(Model.Count / (double)Model.Search.PageSize);
                        int currentPage = Model.Search.Page;
                        
                        if (currentPage > 1)
                        {
                            <li class="page-item">
                                <a class="page-link" href="@Url.Action("Index", new { page = currentPage - 1, pageSize = Model.Search.PageSize, name = Model.Search.Name, categoryId = Model.Search.CategoryId, description = Model.Search.Description })">&laquo;</a>
                            </li>
                        }

                        for (int i = 1; i <= totalPages; i++)
                        {
                            <li class="page-item @(i == currentPage ? "active" : "")">
                                <a class="page-link" href="@Url.Action("Index", new { page = i, pageSize = Model.Search.PageSize, name = Model.Search.Name, categoryId = Model.Search.CategoryId, description = Model.Search.Description })">@i</a>
                            </li>
                        }

                        if (currentPage < totalPages)
                        {
                            <li class="page-item">
                                <a class="page-link" href="@Url.Action("Index", new { page = currentPage + 1, pageSize = Model.Search.PageSize, name = Model.Search.Name, categoryId = Model.Search.CategoryId, description = Model.Search.Description })">&raquo;</a>
                            </li>
                        }
                    }
                </ul>
            </nav>
        </div>

    }

</div>